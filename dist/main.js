!function(t){var i={};function e(a){if(i[a])return i[a].exports;var n=i[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,a){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:a})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(a,n,function(i){return t[i]}.bind(null,n));return a},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/dist/",e(e.s=1)}([function(t,i,e){},function(t,i,e){"use strict";e.r(i);e(0);function a(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var n=function(){function t(i,e,a){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.height=50,this.width=50,this.dmg=a,this.name=i.name,this.target=e,this.img=new Image,this.img.src="./src/images/rock.png",this.position={x:i.position.x+i.width/2,y:i.position.y+50},this.attackTop={x:e.position.x-e.width/5,y:e.position.y+e.height/2},this.attackBot={x:e.position.x+e.width-20,y:e.position.y},this.xVelocity=i.position.x>e.position.x?-150:150,this.yVelocity=150===this.xVelocity?-60:60,this.done=!1,this.finalPos=this.xVelocity>0?this.attackTop:this.attackBot}var i,e,n;return i=t,(e=[{key:"handleCollision",value:function(){this.target.health-=this.dmg,this.target.handleAttack(),this.target.health<=0&&(this.target.health=0)}},{key:"update",value:function(t){this.xVelocity>0?this.position.x<=this.finalPos.x||this.position.y>=this.finalPos.y?(this.position.x+=this.xVelocity/t,this.position.y+=this.yVelocity/t):this.done=!0:this.position.x>=this.finalPos.x||this.position.y<=this.finalPos.y?(this.position.x+=this.xVelocity/t,this.position.y+=this.yVelocity/t):this.done=!0}},{key:"draw",value:function(t){if(this.done)return null;t.drawImage(this.img,this.position.x,this.position.y,this.width,this.height)}}])&&a(i.prototype,e),n&&a(i,n),t}();function s(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var h=function(){function t(i,e,a){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameHeight=e,this.gameWidth=a,this.finalStatus=i,this.status=this.finalStatus.split(""),this.currentStatus="",this.height=125,this.width=400,this.count=0,this.length=i.length,this.position={x:this.gameWidth-this.width-50,y:this.gameHeight-this.height-30},this.draw=this.draw.bind(this),this.update=this.update.bind(this)}var i,e,a;return i=t,(e=[{key:"draw",value:function(t){t.rect(this.position.x,this.position.y,this.width,this.height),t.fillStyle="white",t.fill(),t.lineWidth=5,t.strokeStyle="black",t.stroke(),t.font="20px Arial",t.fillStyle="black";var i=this.position.x+20;t.fillText(this.currentStatus,i,this.position.y+this.height/1.75)}},{key:"update",value:function(){this.count<this.length&&(this.currentStatus+=this.status[this.count],this.count++)}}])&&s(i.prototype,e),a&&s(i,a),t}();function o(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var r=function(){function t(i,e,a,n,s){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=a,this.fileName=this.name.split(" ").join(""),this.img=new Image,this.img.src="./src/images/".concat(this.fileName,".png"),this.height=150,this.width=150,this.gameWidth=s,this.gameHeight=n,this.health=i,this.currentHealth=i,this.maxHealth=i,this.attacking=!1,this.inPosition=!1,this.attackItems=[],this.inPosition=!1,this.statusText=null,this.attackText=null,this.attackPower=e,this.velocity=55,this.position={y:20,x:this.gameWidth-this.width-50},this.initialPosition={x:this.gameWidth},this.attackAnimation=this.attackAnimation.bind(this),this.heal=this.heal.bind(this)}var i,e,a;return i=t,(e=[{key:"draw",value:function(t,i){var e=this;this.attacked||t.drawImage(this.img,this.initialPosition.x,this.position.y,this.height,this.width),this.attackItems.forEach((function(a,n){a.done&&(a.handleCollision(),delete e.attackItems[n]),a.update(i),a.draw(t)}))}},{key:"update",value:function(t){t&&(this.initialPosition.x>this.position.x&&(this.initialPosition.x-=this.velocity/t),this.initialPosition.x<=this.position.x&&(this.inPosition=!0))}},{key:"handleAttack",value:function(){var t=this;this.attacked=!0;var i=setInterval((function(){clearInterval(i),t.attacked=!1}),20)}},{key:"attackAnimation",value:function(t){var i=this,e=Math.floor((Math.random()+.25)*this.attackPower);this.statusText=new h("".concat(this.name," attacked ").concat(t.name," for ").concat(e," damage!"),this.gameHeight,this.gameWidth),this.attacking=!0;var a=0,s=e/3,o=setInterval((function(){a++,i.attackItems.push(new n(i,t,s)),3===a&&clearInterval(o)}),250),r=setInterval((function(){clearInterval(r),i.attacking=!1}),2500)}},{key:"heal",value:function(){var t=this,i=Math.floor(.1*this.maxHealth);this.statusText=new h("".concat(this.name," healed for ").concat(i,"!"),this.gameHeight,this.gameWidth),this.attacking=!0,this.health+=i,this.health>=100&&(this.health=100);var e=setInterval((function(){clearInterval(e),t.attacking=!1}),2500)}},{key:"playTurn",value:function(t){var i=this,e=this.health<20&&t.health>20?function(){return i.heal()}:function(t){return i.attackAnimation(t)};setTimeout((function(){return e(t)}),1)}}])&&o(i.prototype,e),a&&o(i,a),t}();function l(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var c=function(){function t(i,e,a,n,s){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=a,this.fileName=this.name.split(" ").join(""),this.img=new Image,this.img.src="./src/images/".concat(this.fileName,".png"),this.height=150,this.width=150,this.health=i,this.currentHealth=i,this.gameHeight=n,this.gameWidth=s,this.maxHealth=i,this.attacking=!1,this.attacked=!1,this.attackItems=[],this.inPosition=!1,this.statusText=null,this.attackText=null,this.healText=null,this.attackPower=e,this.velocity=55,this.position={y:this.gameHeight-this.height-50,x:40},this.initialPosition={x:-this.width},this.attackAnimation=this.attackAnimation.bind(this),this.draw=this.draw.bind(this)}var i,e,a;return i=t,(e=[{key:"draw",value:function(t,i){var e=this;this.attacked||t.drawImage(this.img,this.initialPosition.x,this.position.y,this.height,this.width),this.attackItems.forEach((function(a,n){a.done&&(a.handleCollision(),delete e.attackItems[n]),a.update(i),a.draw(t)}))}},{key:"update",value:function(t){t&&(this.initialPosition.x<this.position.x&&(this.initialPosition.x+=this.velocity/t),this.initialPosition.x>=this.position.x&&(this.inPosition=!0))}},{key:"handleAttack",value:function(){var t=this;this.attacked=!0;var i=setInterval((function(){clearInterval(i),t.attacked=!1}),20)}},{key:"attackAnimation",value:function(t){var i=this,e=Math.floor((Math.random()+.25)*this.attackPower);this.statusText=new h("".concat(this.name," attacked ").concat(t.name," for ").concat(e," damage!"),this.gameHeight,this.gameWidth),this.attacking=!0;var a=0,s=e/3,o=setInterval((function(){a++,i.attackItems.push(new n(i,t,s)),3===a&&clearInterval(o)}),250),r=setInterval((function(){clearInterval(r),i.attacking=!1}),2500)}},{key:"heal",value:function(){var t=this,i=Math.floor(.1*this.maxHealth);this.statusText=new h("".concat(this.name," healed for ").concat(i,"!"),this.gameHeight,this.gameWidth),this.attacking=!0,this.health+=i,this.health>=100&&(this.health=100);var e=setInterval((function(){clearInterval(e),t.attacking=!1}),2500)}},{key:"healAnimation",value:function(){}}])&&l(i.prototype,e),a&&l(i,a),t}();function u(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var p=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameHeight=i.gameHeight,this.gameWidth=i.gameWidth,this.height=25,this.width=.75*i.width,this.player=i,this.draw=this.draw.bind(this),this.position={x:i.position.x+i.width/8,y:i.position.y+i.height+10}}var i,e,a;return i=t,(e=[{key:"update",value:function(t){this.player.currentHealth!==this.player.health&&(this.player.currentHealth<this.player.health&&(this.player.currentHealth+=.5),this.player.currentHealth>this.player.health&&(this.player.currentHealth-=.5))}},{key:"draw",value:function(t){this.player.inPosition&&(t.fillStyle="white",t.fillRect(this.position.x,this.position.y,this.width,this.height),t.fillStyle="red",t.fillRect(this.position.x,this.position.y,this.width*(this.player.currentHealth/this.player.maxHealth),this.height),t.font="16px Arial",t.fillStyle="black",t.fillText(Math.round(this.player.currentHealth),this.position.x+this.width/2.5,this.position.y+this.height-5))}}])&&u(i.prototype,e),a&&u(i,a),t}();function d(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var f=function(){function t(i,e,a){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameHeight=i,this.gameWidth=e,this.game=a,this.height=125,this.width=400,this.selected=0,this.optionsText=["Attack","Heal","Quit"],this.options=[this.attack,this.heal,this.quit],this.position={x:this.gameWidth-this.width-50,y:this.gameHeight-this.height-30}}var i,e,a;return i=t,(e=[{key:"drawLine",value:function(t,i){0===this.selected?(t.beginPath(),t.moveTo(i,this.gameHeight-75),t.lineTo(i+85,this.gameHeight-75),t.closePath(),t.stroke()):1===this.selected?(t.beginPath(),t.moveTo(i+115,this.gameHeight-75),t.lineTo(i+180,this.gameHeight-75),t.closePath(),t.stroke()):2===this.selected&&(t.beginPath(),t.moveTo(i+210,this.gameHeight-75),t.lineTo(i+270,this.gameHeight-75),t.closePath(),t.stroke())}},{key:"draw",value:function(t){t.rect(this.position.x,this.position.y,this.width,this.height),t.fillStyle="white",t.fill(),t.lineWidth=5,t.strokeStyle="black",t.stroke();var i=this.optionsText.join("    ");t.font="30px Arial",t.fillStyle="black";var e=this.position.x+this.width/6;t.fillText(i,e,this.position.y+this.height/1.75),this.drawLine(t,e)}},{key:"attack",value:function(t,i){t.attackAnimation(i)}},{key:"heal",value:function(t){t.heal()}},{key:"quit",value:function(){console.log("Button not implemented yet!")}}])&&d(i.prototype,e),a&&d(i,a),t}();function y(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var m=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=i,this.computer=e,this.gameState=!0,this.activeAttack=!1,this.start=!1,this.playHealth=new p(this.player),this.compHealth=new p(this.computer),this.battleOptions=new f(this.player.gameHeight,this.player.gameWidth,this),this.currentPlayer=this.player,this.status=null,this.changeTurn=this.changeTurn.bind(this)}var i,e,a;return i=t,(e=[{key:"changeTurn",value:function(){this.currentPlayer===this.player?this.currentPlayer=this.computer:this.currentPlayer=this.player}},{key:"winner",value:function(){this.player.health<=0&&console.log("".concat(this.computer.name," wins!")),this.computer.health<=0&&console.log("".concat(this.player.name," wins!"))}},{key:"gameOver",value:function(){return(this.player.health<=0||this.computer.health<=0)&&(this.gameState=!1,!0)}}])&&y(i.prototype,e),a&&y(i,a),t}();document.addEventListener("DOMContentLoaded",(function(){var t,i,e,a=document.getElementById("game-board").getContext("2d"),n=document.getElementById("menu");window.addEventListener("keypress",(function s(h){32===h.keyCode&&(a.clearRect(0,0,840,480),n.classList.add("close-menu"),window.removeEventListener("keypress",s),window.addEventListener("keydown",o),i=new c(100,20,"Chrome",480,840),e=new r(100,20,"Firefox",480,840),t=new m(i,e),u())}));var s=document.getElementById("game-over"),h=function n(h){32===h.keyCode&&(a.clearRect(0,0,840,480),s.classList.add("close-menu"),window.removeEventListener("keypress",n),window.addEventListener("keydown",o),i=new c(100,20,"Chrome",480,840),e=new r(100,20,"Firefox",480,840),t=new m(i,e),u())},o=function(i){if(t.player.inPosition&&t.computer.inPosition&&(t.start=!0),t.currentPlayer===t.player&&!1===t.activeAttack&&!0===t.start){var e=t.battleOptions.selected;switch(i.keyCode){case 37:i.preventDefault(),(e-=1)<0&&(e=t.battleOptions.options.length-1),t.battleOptions.selected=e;break;case 39:i.preventDefault(),++e>t.battleOptions.options.length-1&&(e=0),t.battleOptions.selected=e;break;case 13:i.preventDefault();var a=t.battleOptions.options[e];if(e===t.battleOptions.options.length-1)return void a();t.activeAttack=!0,t.changeTurn(),a(t.player,t.computer)}}},l=0;function u(i){var e=i-l;l=i,a.clearRect(0,0,840,480),a.beginPath(),t.computer.attacking||t.player.attacking||(t.activeAttack=!1),t.currentPlayer!==t.computer||t.activeAttack||(t.activeAttack=!0,t.computer.playTurn(t.player),t.currentPlayer=t.player),t.currentPlayer===t.player&&t.activeAttack?t.computer.statusText?(t.computer.statusText.update(a),t.computer.statusText.draw(a)):t.battleOptions.draw(a):t.currentPlayer===t.computer&&t.activeAttack&&t.computer.statusText?(t.player.statusText.update(a),t.player.statusText.draw(a)):t.battleOptions.draw(a),t.player.update(e),t.player.draw(a,e),t.computer.update(e),t.computer.draw(a,e),t.playHealth.update(e),t.playHealth.draw(a),t.compHealth.update(e),t.compHealth.draw(a),t.gameOver()&&!t.activeAttack&&setTimeout((function(){return t.winner()}),2e3),t.gameState?requestAnimationFrame(u):(cancelAnimationFrame(u),window.removeEventListener("keydown",o),s.classList.remove("close-menu"),window.addEventListener("keypress",h))}}))}]);
//# sourceMappingURL=main.js.map